# Movie Review Console App

**사용자가 영화를 등록하고 리뷰(별점과 감상평)를 작성하면, 영화별 평균 평점을 계산해주는 콘솔 기반 프로그램입니다.**

--- 

## 실행 방법

### 1. 터미널에서 실행

** 프로젝트 루트에서 아래 명령을 순서대로 실행합니다.**

    ./gradlew build
     java -jar build/libs/movie-review-0.0.1-SNAPSHOT.jar

**실행 후 콘솔에 아래와 같은 화면이 나타나면 정상입니다.**

      === 영화 리뷰 프로그램 ===
      1. 영화 등록
      2. 리뷰 등록
      3. 리뷰 조회
      4. 종료
      > 번호를 입력하세요:

**숫자를 입력해 메뉴를 사용할 수 있습니다.**

### 2. IDE에서 실행

1. MovieReviewApplication 클래스를 엽니다.
2. main 메서드 왼쪽의 재생 버튼을 클릭합니다.
3. Run 'MovieReviewApplication.main()'을 선택하면 콘솔 프로그램이 실행됩니다.

---

## 프로그램 시작 화면 (메인 메뉴)

**프로그램을 시작하면 가장 먼저 다음 메뉴가 표시됩니다.**

      === 영화 리뷰 프로그램 ===
      1. 영화 등록
      2. 리뷰 등록
      3. 리뷰 조회
      4. 종료
      > 번호를 입력하세요:

- 번호를 입력하면 해당 기능으로 이동합니다.
- 숫자가 아닌 값, 범위를 벗어난 번호 입력 시 오류 메시지 출력 후 다시 입력받습니다.

---

## 주요 기능

### 1. 입력

1. **영화 등록**
    - 사용자가 **영화 제목, 감독 이름, 장르**를 입력하여 새로운 영화를 등록합니다.
        ```bash
        === 영화 등록 ===
        > 영화 제목을 입력하세요:
        > 감독을 입력하세요:
    - 장르는 아래 목록에서 ID를 선택합니다.
        ```bash
         --- 장르 목록 ---
         1. 액션
         2. 코미디
         3. 드라마
         4. 공포
         5. 로맨스
         6. SF
         > 장르 번호를 입력하세요:
    - 중복된 제목의 영화는 등록할 수 없습니다.
2. **리뷰 작성**
    - 등록된 영화 목록에서 ID를 선택하여 리뷰를 작성합니다.
    - 평점은 **0.5** 단위로 입력하며, **0.0~5.0 범위**만 허용됩니다.
    - 감상평이 공백일 경우 등록되지 않습니다.
       ```bash
       ====== 리뷰 등록 ======
       --- 영화 목록 ---
       1. 기생충
       2. 미션 임파서블
       ----------------
       > 리뷰를 등록할 영화 ID를 입력하세요:
       > 평점을 입력하세요(0.0 ~ 5.0, 0.5 단위):
       > 감상평을 입력하세요:
      
       ✅ 리뷰가 등록되었습니다!
3. **리뷰 조회**
    - 등록된 모든 영화의 리뷰를 확인할 수 있습니다.
    - 각 영화의 평균 평점을 함께 출력합니다.
      ```bash
      [1] 기생충 (감독: 봉준호 | 장르: 공포)
          평균 평점: 4.5
          - [⭐️5.0] 정말 재밌었어요!!
          - [⭐️4.0] 흥미로운 전개

      [2] 인셉션 (감독: 크리스토퍼 놀란 | 장르: SF)
          평균 평점: 0.0 (리뷰 없음)
4. **종료**
    - 프로그램이 종료됩니다.

### 2. 평균 평점 계산

- 등록된 리뷰의 평점을 기준으로 자동으로 평균 평점을 계산합니다.
- 리뷰가 없는 경우 0.0으로 표시됩니다.

### 3. 출력

- **평점 순 정렬**
    - 영화 목록은 **평균 평점**이 높은 순으로 정렬되어 출력됩니다.
- 각 영화의 리뷰는 등록 순으로 표시됩니다.

### 4. 예외처리

- 예외 발생 시 IllegalArgumentException을 발생시킨 후 [ERROR]로 시작하는 에러 메세지를 출력합니다.
- 입력값이 잘못된 경우 오류 메세지를 출력한 뒤 해당 입력부터 다시 입력을 받습니다.

**예외 상황 목록**

| 구분    | 조건                    | 예외 메세지 예시                     |
|-------|-----------------------|-------------------------------|
| 메뉴 선택 | 올바른 번호 입력이 아닌 경우      | [ERROR] 올바른 번호를 입력해야 합니다.     |
| 영화 제목 | 공백 입력                 | [ERROR] 영화 제목은 비워둘 수 없습니다.    |
|       | 중복된 영화 제목 입력          | [ERROR] 이미 등록된 영화입니다.         |
| 영화 감독 | 공백 입력                 | [ERROR] 영화 감독을 입력해야 합니다.      |
| 평점    | 0.5 단위의 입력이 아닌 경우     | [ERROR] 평점은 0.5 단위로 입력해야 합니다. |
|       | 숫자 외 값 입력             | [ERROR] 평점은 숫자 입력만 가능합니다.     |
|       | 0.0~5.0 범위의 입력이 아닌 경우 | [ERROR] 평점은 0.0~5.0 범위여야 합니다. |
|       | 공백 입력                 | [ERROR] 평점을 입력해야 합니다.         |
| 감상평   | 공백 입력                 | [ERROR] 감상평을 입력해야 합니다.        |
| 영화 ID | 존재하지 않는 ID 입력         | [ERROR] 해당 ID의 영화가 존재하지 않습니다. |
|       | 공백 입력                 | [ERROR] 영화 ID를 입력해야 합니다.      |
| 장르 선택 | 1~7 외 숫자 입력           | [ERROR] 해당 ID의 장르는 존재하지 않습니다. |
|       | 공백 입력                 | [ERROR] 장르 ID를 선택해야 합니다.      |

---

## 테스트

### 1. 정상 동작 테스트

| 테스트 항목 | 검증 내용                                |
|--------|--------------------------------------|
| 영화 등록  | 제목, 감독, 장르 입력 시 정상 등록되는지 검증          |
| 리뷰 작성  | 영화를 선택하고, 평점과 감상평을 작성하면 리뷰가 등록되는지 검증 | 
| 리뷰 조회  | 영화 목록과 리뷰가 올바르게 출력되는지 검증             |
| 평균 계산  | 여러 리뷰 작성 시 평균이 정확히 계산되는지 검증          |

### 2. 예외 테스트

| 테스트 항목                    | 기대 결과                       |
|---------------------------|-----------------------------|
| 잘못된 장르 ID 입력의 경우          | IllegalArgumentException 발생 |
| 장르 ID를 공백으로 입력한 경우        | IllegalArgumentException 발생 |
| 0.0~5.0 범위를 벗어난 평점 입력의 경우 | IllegalArgumentException 발생 |
| 0.5 단위가 아닌 평점 입력의 경우      | IllegalArgumentException 발생 |
| 평점을 공백으로 입력한 경우           | IllegalArgumentException 발생 |
| 영화 제목을 공백으로 입력한 경우        | IllegalArgumentException 발생 |
| 영화 감독을 공백으로 입력한 경우        | IllegalArgumentException 발생 |
| 감상평을 공백으로 입력한 경우          | IllegalArgumentException 발생 |
| 기존 등록한 영화의 제목과 중복된 경우     | IllegalArgumentException 발생 |
| 존재하지 않는 영화의 ID를 입력한 경우    | IllegalArgumentException 발생 |
| 영화 ID를 공백으로 입력한 경우        | IllegalArgumentException 발생 |